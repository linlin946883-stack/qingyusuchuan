<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>短信转接服务 - 轻羽速传</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/sms.css">
</head>
<body>
  <div class="app-container">
    <!-- 顶部导航 -->
    <div class="app-header">
      <button class="back-btn" onclick="window.history.back()">
        <span class="icon">←</span>
      </button>
      <div class="header-spacer"></div>
    </div>

    <div class="page">
    
    <!-- 顶部介绍卡片 -->
    <div class="hero-card">
      <img src="../icon/duanxin.svg" alt="">
      <div class="hero-title">短信转接服务</div>
      <div class="hero-desc">将您的心意通过短信准时送达</div>
      <div class="hero-tags">
        <span class="tag">⚡ 快速送达</span>
        <span class="tag">💌 温暖表白</span>
        <span class="tag">✅ 安全隐私</span>
      </div>
    </div>

    <!-- 表单卡片 -->
    <div class="form-card">
      
      <!-- 1. 对方手机号 -->
      <div class="form-item">
        <label class="item-label">对方手机号</label>
        <input 
          id="phone"
          type="tel"
          class="account-input" 
          placeholder="请输入对方的手机号码"
          maxlength="11"
        >
        <span id="phoneError" class="error-hint"></span>
      </div>

        <!-- 2. 发送时间 -->
        <div class="form-item">
          <label class="item-label">期望送达时间</label>
          <div class="time-selector" id="timeSelector">
            <span id="timeDisplay" class="selector-text placeholder">立即发送（或选择指定时间）</span>
            <span class="close-mini" id="resetTime" style="display:none;">✕</span>
          </div>
        </div>

      <!-- 3. 短信内容 -->
      <div class="form-item">
        <div class="item-header">
          <label class="item-label">短信内容</label>
          <span class="preset-link" id="openPreset">📝 内置文案</span>
        </div>
        <div class="message-box">
          <textarea 
            id="content"
            class="message-textarea" 
            placeholder="请输入要传达的内容&#10;可以是表白、早晚安、祝福、挽回等任何您想说的话..."
            maxlength="500"
          ></textarea>
          <div class="message-footer">
            <div class="footer-left">
              <span id="charCount" class="char-count">0/500</span>
              <span id="priceInfo" class="price-info">按照37个字一条计算，共￥0.00元</span>
            </div>
            <span class="preview-tag" id="previewTag">预览短信</span>
          </div>
        </div>
      </div>

      <!-- 4. 用户协议勾选 -->
      <div class="form-item">
        <div class="agreement-box">
          <label class="agreement-label">
            <input type="checkbox" id="agreeCheckbox" class="agreement-checkbox">
            <span class="agreement-text">我同意<span class="agreement-link" id="openAgreement">用户协议</span>，并遵守和承担相关法律法规</span>
          </label>
        </div>
      </div>

    </div>

    <!-- 底部提交按钮 -->
    <div class="submit-wrapper">
      <button class="submit-btn" id="submitBtn">
        <span class="btn-icon">📨</span>
        <span class="btn-text">立即发送短信</span>
      </button>
    </div>

    <!-- 时间选择底部多列滚动选择器  -->
    <div id="pickerSheet" class="picker-sheet-overlay" style="display:none;">
      <div class="picker-sheet" id="pickerSheetInner">
        <div class="picker-header">
          <span class="picker-cancel" data-picker-cancel>取消</span>
          <span class="picker-title">选择发送时间</span>
          <span class="picker-confirm" data-picker-confirm>确认</span>
        </div>
        <div class="picker-view" id="pickerView">
          <div class="picker-column" data-col="0" id="pickerSheet_colYear"></div>
          <div class="picker-column" data-col="1" id="pickerSheet_colMonth"></div>
          <div class="picker-column" data-col="2" id="pickerSheet_colDay"></div>
          <div class="picker-column" data-col="3" id="pickerSheet_colHour"></div>
          <div class="picker-column" data-col="4" id="pickerSheet_colMinute"></div>
          <div class="picker-column" data-col="5" id="pickerSheet_colSecond"></div>
          <div class="picker-indicator"></div>
        </div>
        <div class="quick-actions">
          <span class="quick-btn" data-picker-now>🕒 立即发送</span>
          <span class="quick-btn" data-picker-after-hour>⏰ 1小时后</span>
          <span class="quick-btn" data-picker-tomorrow>🌅 明天同时</span>
        </div>
      </div>
    </div>

    <!-- 文案选择弹窗 -->
    <div id="presetModal" class="modal-overlay" style="display:none;">
      <div class="preset-modal">
        <div class="modal-header">
          <span class="modal-title">选择文案模板</span>
          <span class="modal-close" id="closePreset">✕</span>
        </div>
        <div id="presetTabs" class="preset-tabs"></div>
        <div id="presetList" class="preset-list"></div>
      </div>
    </div>

    <!-- 短信预览弹窗（从底部滑出） -->
    <div id="smsPreviewModal" class="sms-preview-modal" style="display:none;">
      <div class="sms-preview-overlay"></div>
      <div class="sms-preview-container">
        <div class="sms-preview-header">
          <span class="sms-preview-title">📱 短信预览</span>
          <span class="sms-preview-close" id="closeSmsPreview">✕</span>
        </div>
        <div class="sms-preview-content" id="smsPreviewContent">
          <!-- 动态生成预览内容 -->
        </div>
      </div>
    </div>

    <!-- 温馨提示弹窗 -->
    <div id="warningModal" class="warning-modal-overlay" style="display:none;">
      <div class="warning-modal">
        <div class="warning-header">
          <span class="warning-icon">⚠️</span>
          <span class="warning-title">温馨提示</span>
        </div>
        <div class="warning-content">
          <div class="warning-item">
            <span class="warning-label">🚫 禁止发送高风险内容：</span>
            <span class="warning-text">如涉政府、黄赌毒、举报投诉、恐吓辱骂、家庭破坏、游戏中奖、银行/快递等信息。违规将封号且不退款。</span>
          </div>
          <div class="warning-item">
            <span class="warning-label">✅ 发送前请确认：</span>
            <span class="warning-text">对方同意接收，部分内容可能触发人工审核，请合理安排时间。</span>
          </div>
          <div class="warning-item">
            <span class="warning-label">📞 推荐功能：</span>
            <span class="warning-text">短信可能延迟，推荐使用【和解电话】功能即时沟通，即使被拉黑也能打通。</span>
          </div>
          <div class="warning-item warning-danger">
            <span class="warning-label">⚖️ 法律提醒：</span>
            <span class="warning-text">违规信息可能触及法律风险，我们将配合相关部门调查取证。网络非法律之外之地。</span>
          </div>
        </div>
        <div class="warning-footer">
          <button class="warning-btn" id="closeWarning">我已知晓</button>
        </div>
      </div>
    </div>

    <!-- 用户协议弹窗 -->
    <div id="agreementModal" class="agreement-modal-overlay" style="display:none;">
      <div class="agreement-modal">
        <div class="agreement-modal-header">
          <span class="agreement-modal-title">用户协议</span>
          <span class="agreement-modal-close" id="closeAgreement">✕</span>
        </div>
        <div class="agreement-modal-content" id="agreementContent">
          <!-- 协议内容将动态加载 -->
        </div>
        <div class="agreement-modal-footer">
          <button class="agreement-modal-btn" id="agreeAgreement">我已阅读并同意</button>
        </div>
      </div>
    </div>

  </div>

  <script src="../js/common.js"></script>
  <script src="../js/picker.js"></script>
  <script src="../js/sms.js"></script>
</body>
</html>
